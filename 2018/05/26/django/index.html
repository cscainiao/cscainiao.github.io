<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>django(课堂重点) | 熊星的个人博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">django(课堂重点)</h1><a id="logo" href="/.">熊星的个人博客</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">django(课堂重点)</h1><div class="post-meta">May 26, 2018</div><div class="post-content"><ul>
<li><p>新建django项目</p>
<ul>
<li><p>pycharm直接创建 (默认是django2.0版本)</p>
</li>
<li><p>手动创建</p>
<ul>
<li><p>首先在目录下面新建一个venv的文件夹(这个文件夹以后全部装虚拟环境),新建一个目录用来放项目  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir venv</span><br><span class="line">mkdir workspace</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入文件夹目录,安装virtualenv</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd vevn</span><br><span class="line">pip install virtualenv</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装django虚拟环境, (指定python的版本,并安装纯净的django环境)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualenv -p /usr/local/bin/python3.6 --no-site-packages djangoenv</span><br></pre></td></tr></table></figure>
</li>
<li><p>激活虚拟环境</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source djangoenv/bin/activate</span><br></pre></td></tr></table></figure>
</li>
<li><p>pip freeze/pip list:查看pip安装过的包</p>
</li>
<li><p>安装django</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django==1.11</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入workspace目录新建django项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject</span><br></pre></td></tr></table></figure>
</li>
<li><p>打开pycharm,用pycharm打开新建的项目</p>
<ul>
<li>配置pycharm虚拟环境,找到刚刚新建的虚拟环境djangovenv/bin/python3.6</li>
</ul>
</li>
<li><p>配置运行</p>
</li>
<li><p>确认terminal是在虚拟环境下面,如果没有激活虚拟环境(同步骤4) 在回到项目主目录下</p>
</li>
<li><p>这样就可以达到pycharm建的django项目的效果了,而且还不用安装多余的包,项目需要什么包就安装什么包,以后建项目的时候就可以直接引用之前建立好的虚拟环境</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>文件上传</p>
<ul>
<li><p>页面的input标签的type属性写file</p>
</li>
<li><p>项目新建media目录</p>
</li>
<li><p>项目setting设置</p>
</li>
<li><p>models里面设置   avatar = models.ImageField(upload_to=’icons’)</p>
</li>
</ul>
</li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MEDIA_URL = &apos;/media/&apos;</span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, &apos;media&apos;)</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li><p>项目url设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns += static(MEDIA_URL, document_root=MEDIA_ROOT)</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示页面img下面src属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;/media/&#123;&#123; user.icon &#125;&#125;&quot; alt=&quot;icon&quot;&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>中间件</p>
<ul>
<li>项目utils目录下新建UserAuthMiddleware.py在里面写入中间件</li>
<li>项目setting下面的MIDDLEWARE添加新建的中间件</li>
</ul>
</li>
<li><p>http请求方式</p>
<ul>
<li>GET：用于获取</li>
<li>POST： 用于创建</li>
<li>PUT：用于修改， 全部属性都会修改</li>
<li>PATCH: 用于修改，部分属性进行修改</li>
<li>DELETE: 删除</li>
</ul>
</li>
<li><p>ajax请求方式 (后端定义一个url让ajax去请求,  返回后端url定义的函数, 函数返回的数据在ajax 的msg里面;Ajax里面的data里面的数据传入后端)</p>
<ul>
<li><p>$.get(url, function(msg){  }),     </p>
</li>
<li><p>$.post(url, data,  function(msg){ })   url表示请求的地址，function(msg)代表，请求成功后的回调函数，msg是api返回的结果</p>
</li>
<li><p>$.ajax({</p>
<pre><code>    url:&apos;&apos;, # 请求的url地址，
type:&apos;&apos;, # GET POST PATCH PUT DELETE
data：{&apos;name&apos;:name,&apos;sex&apos;:sex}，  # 代表请求的参数 传入后端
dataType:&apos;json&apos;,
headers:{&apos;X-CSRFToken&apos;: csrf}  # 代表传递的csrf值
success:function(msg){
    成功执行回调函数
},
error:function(msg){
    失败执行回调函数
}
</code></pre><p>});</p>
</li>
<li><p>用于图片上传的ajax</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(this).ajaxSubmit(&#123;  </span><br><span class="line">    url: &apos;/user/profile/&apos;,</span><br><span class="line">    type: &apos;PATCH&apos;,</span><br><span class="line">    dataType: &apos;json&apos;,</span><br><span class="line">    data: ,</span><br><span class="line">    success: function (msg) &#123;</span><br><span class="line">        alert(2)</span><br><span class="line">    &#125;,</span><br><span class="line">    error: function (msg) &#123;</span><br><span class="line">        alert(&apos;请求失败&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>F/Q</p>
<ul>
<li>F：用于做计算  students.filter(s_yuwen__gt= F(‘s_shuxue’) + 10)</li>
<li>Q:用于过滤信息       |或者       &amp;并且      ~取反</li>
</ul>
</li>
</ul>
<h3 id="django-flask自带加密模块"><a href="#django-flask自带加密模块" class="headerlink" title="django/flask自带加密模块"></a>django/flask自带加密模块</h3><p>1.django:    from django.contrib.auth.hashers import make_password, check_password</p>
<p>​    make_password加密: 传入需要加密的密码, 返回加密后的密码</p>
<p>​    check_password(原始密码, 加密后的密码)密码验证, 返回true或者false</p>
<p>2.flask:   from werkzeug.security import generate_password_hash, check_password_hash</p>
<p>​    generate_password_hash(需要加密的密码):传入需要加密的密码, 返回加密后的密码</p>
<p>​    check_password_hash(加密后的密码,原始密码)</p>
<p>注意django和flask密码验证的时候传入密码的顺序是反的</p>
<h3 id="django数据迁移"><a href="#django数据迁移" class="headerlink" title="django数据迁移"></a>django数据迁移</h3><ol>
<li><p>python manage.py makemigrations app_name</p>
</li>
<li><p>python manage.py migrate app_name</p>
<p>注意:1.要在setting中设置数据库连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    &apos;default&apos;: &#123;</span><br><span class="line">        &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;,</span><br><span class="line">        &apos;HOST&apos;: &apos;10.7.152.57&apos;,</span><br><span class="line">        &apos;PORT&apos;: 3306,</span><br><span class="line">        &apos;NAME&apos;: &apos;ihome_django&apos;,  # 数据库名称</span><br><span class="line">        &apos;USER&apos;: &apos;root&apos;,</span><br><span class="line">        &apos;PASSWORD&apos;: &apos;123456&apos;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.在项目目录下的<strong>init</strong>.py文件里面需要加入下面内容, 否则会报错没有MySQLdb模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>​</p>
<p>​</p>
<p>​</p>
<p>​</p>
<p>​</p>
<p>​</p>
<p>​</p>
<p>​</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2018/05/26/mysql基础/">mysql基础</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/26/mysql基础/">mysql基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/26/django/">django(课堂重点)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">熊星的个人博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>